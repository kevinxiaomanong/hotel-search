### 项目描述

这是一款针对旅客找寻酒店业务需求的软件，实现了四部分功能

- 酒店搜索和分页
- 酒店结果过滤
- 我周边的酒店
- 酒店竞价排名

### 技术选型

项目采用分布式架构，依赖springboot的微服务解决方案，基于springboot框架实现

数据层我们使用了MySQL数据库、ElasticSearch分布式搜索引擎

### 业务实现思路

ES官方提供了各种不同语言的客户端，用来操作ES。这些客户端的本质就是组装DSL语句，通过http请求发送给ES。官方文档地址：https://www.elastic.co/guide/en/elasticsearch/client/index.html

这里我们使用的是Java HighLevel Rest Client客户端API

即我们通过官方提供的API来编写DSL语句通过请求发送给ES服务端并解析返回的结果

#### 周边酒店的功能实现细节

我们在用户授权下获取到用户所处的经纬度坐标，根据es封装的geo_distance排序功能，我们将返回的结果按照地理坐标排序返回给用户，这样用户边可以根据距离从近到远进行选择

此外我们可以在结果解析阶段在解析Source部分的同时还得到sort部分也就是排序的距离，这样边可以告知用户离每家酒店具体的距离

#### 酒店竞价排名的搜索

这里的需求是：让**指定酒店**排名靠前。因此我们需要给这些酒店添加一个标记，这样在过滤条件中就可以**根据这个标记来判断，是否要提高算分**。

即给指定的酒店添加**广告**标记（可以通过这个业务来吃一波广告费哦）

我们可以通过算分函数来实现此业务功能

我们给酒店添加一个字段：isAD，Boolean类型：

- true：是广告
- false：不是广告

这样就可以确定function_score包含3个要素就很好确定了：

- 过滤条件：判断isAD 是否为true
- 算分函数：我们可以用最简单暴力的weight，固定加权值
- 加权方式：可以用默认的相乘，大大提高算分

而我们返回给用户的酒店是按照算法排序的，这样通过算分函数控制来使得交了广告费的公司能够排进前几位里面



